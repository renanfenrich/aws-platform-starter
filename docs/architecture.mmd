flowchart TB
  User((User)) --> ALB[ALB : HTTPS]

  subgraph VPC
    subgraph PublicSubnets[Public Subnets x2]
      ALB
      NAT[NAT GW (1 or 2)]
    end

    subgraph PrivateSubnets[Private Subnets x2]
      Compute[Compute : ECS or self-managed Kubernetes on EC2]
      RDS[(RDS PostgreSQL)]
    end
  end

  ALB --> Compute
  Compute --> RDS
  Compute --> NAT
